# Сервис синхронизации файлов
Проект, разработанный на языке Python, который синхронизирует файлы указанной папки на компьютере пользователя и в Яндекс Диске - облачном хранилище файлов.\
Программа отслеживает изменения в файлах на локальном компьютере и вносит их в Яндекс Диск.

## Начало работы
Для работы Вам нужно клонировать репозиторий в Ваш проект.\
Воспользуйтесь [ссылкой на репотизотрий](https://github.com/TimurKhamidullin28/file-sync-service-with-yandex-disk)

### Установка зависимостей
```
pip install -r requirements.txt
```

### Получение токена авторизации от API Яндекс Диска
Чтобы получить токен, необходимо зарегистрироваться или войти в свой аккаунт в Яндексе, а затем перейти на [сайт для генерации токена](https://yandex.ru/dev/disk/poligon/).

### Задание параметров работы программы
Параметры приложения настраиваются в файле `.env.`\
В файле `.env` нужно задать необходимые параметры, как указано в файле-образце `.env.template.`\
После выполнения указанных выше действий программа будет готова к запуску.

## Описание методов класса-коннектора, отвечающего за работу с Яндекс Диском
Данный класс предоставляет четыре основных метода, с помощью которых происходит синхронизация файлов на локальном компьютере и облачном сервисе:
* Метод, возвращающий информацию о файлах в директории на облачном хранилище
* Метод загрузки файла на облачное хранилище
* Метод обновления файла в облачном хранилище
* Метод удаления файла из облачного хранилища\

### Метод `get_info_remote`
С помощью функции `api_request` из файла `api.py` на сервер отправляется GET-запрос с указанием url, headers (в том числе и Ваш токен авторизации от API Яндекс Диска) и params.\
Далее, из полученного ответа, преобразованного в формат json, извлекается необходимая информация о каждом файле из облачного хранилища: имя файла и время его последнего изменения.\
Полученные данные записываются в словарь, где имя файла — это ключ. Метод `get_info_remote` возвращает такой словарь.

### Метод `load_file`
Метод `load_file` принимает имя файла из отслеживаемой директории, читает и загружает его в заданную директорию в облачном хранилище.\
Посредством функции `api_request` на сервер отправляется GET-запрос с указанием url (endpoint='resources/upload'), headers и params ('path': Путь, по которому следует загрузить файл).\
При успешном выполнении запроса (код 200), в теле ответа возвращается сгенерированный URL для загрузки файла (ключ "href").\
Далее, файл отправляется с помощью `requests.put` на полученный URL для загрузки.

### Метод `update_file`
Метод `update_file` принимает имя файла из отслеживаемой директории, читает и обновляет этот файл в заданной директории в облачном хранилище.\
Функционал аналогичен методу `load_file`, за исключением добавления в параметрах запроса `overwrite` - признака перезаписи файла, который учитывается при повторной загрузки файла.
```python
params={'path': ...,
        'overwrite': 'true'}
```

### Метод `delete_file`
Метод `delete_file` принимает имя файла из указанной директории на облочном сервисе, и безвозвратно удаляет этот файл.\
Удаление файла происходит посредством функции `requests.delete` с указанием url, headers и params (с указанием признака безвозвратного удаления `permanently`).\
В зависимости от выбранного значения признака `permanently` ('false' или 'true'), файл будет перемещен в Корзину (используется по умолчанию) или удален без помещения в Корзину.
```python
params={'path': ...,
        'permanently': 'true'}
```
